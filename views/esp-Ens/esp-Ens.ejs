<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	
	<!-- My CSS -->
	<link rel="stylesheet" href="/css/esp-Ens.css">

	<title>Espace Enseignant</title>
</head>
<body>


	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand">
			<i class='bx bxs-school'></i>
			<span class="text">NeoEsss</span>
		</a>
		<ul class="side-menu top">
			<li class="active">
				<a href="#">
					<i class='bx bxs-dashboard' ></i>
					<span class="text">Dashboard</span>
				</a>
			</li>
			<li>
				<a href="#" class="group-list-link">
					<i class='bx bxs-group' ></i>
					<span class="text">Group list</span>
				</a>
			</li>
			
			<li>
				<a href="#">
					<i class='bx bxs-calendar' ></i>
					<span class="text">Schedule</span>
				</a>
			</li>
			<li>
				<a href="#" class="upload-courses-link">
					<i class='bx bxs-book' ></i>
					<span class="text">Upload courses</span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class='bx bxs-edit-alt' ></i>
					<span class="text">Enter grades</span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class='bx bxs-bell' ></i>
					<span class="text">Notification </span>
				</a>
			</li>

			<li>
				<a href="#">
					<i class='bx bxs-message-dots' ></i>
					<span class="text">Messages </span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class='bx bxs-notepad' ></i>
					<span class="text">Fiche voeux </span>
				</a>
			</li>
		</ul>
		<ul class="side-menu">
			<!--
			<li>
				<a href="#">
					<i class='bx bxs-cog' ></i>
					<span class="text">Settings</span>
				</a>
			</li>
			-->
			<li>
				<a href="#" class="logout">
					<i class='bx bxs-log-out-circle' ></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu' ></i>
			<a href="#" class="nav-link">Categories</a>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>

			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">4</span>
			</a>
			<a href="#" class="profile">
				<img src="/images/people1.jpg">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Dashboard</h1>
					<ul class="breadcrumb">
						<li>
							<a href="#">Dashboard</a>
						</li>
						<li><i class='bx bx-chevron-right' ></i></li>
						<li>
							<a class="active" href="#">Home</a>
						</li>
					</ul>
				</div>
				<!--
				<a href="#" class="btn-download">
					<i class='bx bxs-cloud-download' ></i>
					<span class="text">Download PDF</span>
				</a>
				-->
			</div>

			<div id="dashboard" class="dashboard-section">
				<div class="teacher-info-card">
					<img src="/images/people.png.jpg" alt="Teacher Photo" class="teacher-photo">
					<div class="teacher-details">
						<h2><%=teacher.nom%> <%=teacher.prenom%></h2>
						<p><strong>Sp√©cialit√© :</strong> R√©seaux et T√©l√©com</p>
						<p><strong>Grade</strong> <%=teacher.grade%></p>
					</div>
				</div>
			
				<div class="teacher-metrics">
					<div class="metric-card">
						<h3><%=teacher.classe.length%></h3>
						<p>Classe Enseign√©s</p>
					</div>
					<div class="metric-card">
						<h3>12</h3>
						<p>Cours d√©pos√©s</p>
					</div>
					<div class="metric-card">
						<h3>48</h3>
						<p>√âtudiants</p>
					</div>
				</div>
				<!--
				<div class="chart-container">
					<canvas id="teacherChart"></canvas>
				</div>
				-->
				<h1>üìò Charge Horaire Annuelle</h1>
				<div class="tab-buttons">
					<button onclick="showSemester('s1')">Semestre 1</button>
					<button onclick="showSemester('s2')">Semestre 2</button>
				</div>

				<!-- Tableau S1 -->
				<div id="s1" class="semester-table">
					<h2>Semestre 1</h2>
					<table>
					<thead>
						<tr>
						<th>Module</th>
						<th>CM (h)</th>
						<th>TD (h)</th>
						<th>TP (h)</th>
						<th>Total (h)</th>
						</tr>
					</thead>
					<tbody id="tableS1">
						<!-- Rempli par JS -->
					</tbody>
					</table>
				</div>

				<!-- Tableau S2 -->
				<div id="s2" class="semester-table hidden">
					<h2>Semestre 2</h2>
					<table>
					<thead>
						<tr>
						<th>Module</th>
						<th>CM (h)</th>
						<th>TD (h)</th>
						<th>TP (h)</th>
						<th>Total (h)</th>
						</tr>
					</thead>
					<tbody id="tableS2">
						<!-- Rempli par JS -->
					</tbody>
					</table>
				</div>

				<h1>Statistiques </h1>
				<div class="chart-container">
					<h2>üìä Moyennes par module</h2>
					<canvas id="barChart"></canvas>
				</div>
				 <div class="chart-container">
					<h2>ü•ß R√©partition des √©tudiants par performance</h2>
					<canvas id="pieChart"></canvas>
				</div>

			</div>
			
			<!-- Group List-->	
			<div id="group-list" class="group-list-section" style="display: none;">
			<h2>Liste des Groupes Encadr√©s</h2>
			  <div class="group-cards-container">

				<div class="group-card">
				<h3>Groupe A</h3>
				<p><strong>Niveau :</strong> Master 1</p>
				<p><strong>Sp√©cialit√© :</strong> R√©seaux</p>
				<p><strong>Module :</strong> Syst√®mes Distribu√©s</p>
				<p><strong>√âtudiants :</strong> 3</p>
				<button class="btn-view-students">Voir les √©tudiants</button>
				<!--
				<div class="students-list" style="display: none;">
					<button class="btn-add-seance">‚ûï Ajouter une s√©ance</button>
					<table class="attendance-table">
					<thead>
						<tr>
						<th>Nom</th>
						<th>Pr√©nom</th>
						</tr>
					</thead>
					<tbody>
						<tr>
						<td>Ali</td>
						<td>B.</td>
						</tr>
						<tr>
						<td>Sami</td>
						<td>K.</td>
						</tr>
						<tr>
						<td>Yasmine</td>
						<td>D.</td>
						</tr>
					</tbody>
					</table>
				</div>
			   -->
				</div>

				<div class="group-card">
				<h3>Groupe B</h3>
				<p><strong>Niveau :</strong> Master 2</p>
				<p><strong>Sp√©cialit√© :</strong> Syst√®mes d'Information</p>
				<p><strong>√âtudiants :</strong> 3</p>
				<button class="btn-view-students">Voir les √©tudiants</button>
				<!--
				<div class="students-list" style="display: none;">
					<button class="btn-add-seance">‚ûï Ajouter une s√©ance</button>
					<table class="attendance-table">
					<thead>
						<tr>
						<th>Nom</th>
						<th>Pr√©nom</th>
						</tr>
					</thead>
					<tbody>
						<tr>
						<td>Amira</td>
						<td>T.</td>
						</tr>
						<tr>
						<td>Rachid</td>
						<td>M.</td>
						</tr>
						<tr>
						<td>Nadia</td>
						<td>F.</td>
						</tr>
					</tbody>
					</table>
				</div>
				-->
				</div>

			</div>
			<!-- Zone d'affichage du tableau en dehors des cartes -->
				<div id="students-attendance-container" style="display: none; margin-top: 2rem;">
				<h3>Liste des √âtudiants</h3>
				<p id="selected-group-name" style="font-weight: bold;"></p>
				<button id="add-seance-button" class="btn-add-seance">‚ûï Ajouter une s√©ance</button>
				<table id="attendance-table" class="attendance-table">
					<thead>
					<tr>
						<th>Matricule</th>
						<th>Nom</th>
						<th>Pr√©nom</th>
					</tr>
					</thead>
					<tbody>
					<!-- Rempli dynamiquement -->
					</tbody>
				</table>
				</div>

        </div>



			<!--  Schedule section -->
			<div id="schedule" class="schedule-section" style="display: none;">
				<h2> üóìÔ∏è l'emploi du temps</h2>
				<div id="planningTableContainer" style="display: none;">
					<table id="planningTable">
						<!-- Tableau g√©n√©r√© dynamiquement -->
					</table>
				</div>
			</div>
			

			<!--  Upload Courses section -->

			<div id="upload-courses" class="upload-courses-section" style="display: none;">
				<!--Historique-->
				<div id="history-courses" class="history-courses-section">
					<h2>Historique des cours d√©pos√©s</h2>
					<!-- Ici le contenu dynamique sera inject√© -->
				</div>
				<h2>D√©poser un Nouveau Cours</h2>
				<form class="upload-form">
					<div class="form-group">
						<label for="course-name">Nom du cours</label>
						<input type="text" id="course-name" placeholder="Ex: Syst√®mes d'information avanc√©s" required>
					</div>
			
					<div class="form-group">
						<label for="course-description">Description</label>
						<textarea id="course-description" rows="4" placeholder="Quelques d√©tails sur le contenu du cours..."></textarea>
					</div>
			
					<div class="form-group">
						<label for="course-group">Classe concern√©</label>
						<select id="course-group" required>
							<option value="">-- Choisir une Classe --</option>
							<option value="M1 SI">M1 Systeme d'information</option>
							<option value="M2 SI">M2 Systeme d'information</option>
							<option value="M1 Droit">M1 Droit</option>
							<option value="M2 Droit">M2 Droit</option>
							<option value="M1 Mng">M1 Management</option>
							<option value="M2 Mng">M2 Management</option>
							<option value="M1 Act">M1 Actuariat</option>
							<option value="M2 Act">M2 Actuariat</option>
							<!-- Tu pourras ajouter dynamiquement -->
						</select>
						
						
					</div>

					<div class="form-group">
						<label for="module"> Module concern√© </label>
						<select id="module" required>
							
							<option value=""> -- Choisir un module</option>
						 <!--
							<option value="SIC">Systeme d'information complementaire</option>
							<option value="Archi"> Architecture des S.I des differentes branches de la PS</option>
							<option value="GOSIPS">gestion operationnelles des SI des branches de la PS</option>
							<option value="BI">Informatique Decisionnelle</option>
							<option value="Gouvernance">Les SI comme Outils de la gouvernance de la Ps</option>

							<option value="OPS">Les organisations de la PS</option>
							<option value="TMSAPS">Theories du management strategique Appliquees a la PS</option>
							<option value="MSRFPS">Managementstrategique des ressources financiers de la PS </option>
							<option value="MORPS">Management operationnel des risques Court et long terme de la PS</option>
							<option value="MR2">Methodologie de recherche (2)</option>
							<option value="GP">Gestion de projet</option>
							<option value="PCPC">La politique de communication pour la promotion de la culture de la PS</option>

							<option value="MA">Mathematique actuarielles</option>
							<option value="TR">Theorie des risques</option>
							<option value="MSA">Methodes statistiques appliquees en actuariat</option>
							<option value="OIC">Outils Informatiques de calcul pour les actuaires</option>
							<option value="EA">Evaluation actuarielle en assurance sante,assurance vie Et risques professionnels</option>
							<option value="MAPS">Modelisation actuarielle en matiere de prestation sociales </option>
							<option value="SCF">Comptabilite financiere - SCF</option>
						-->
						</select>

					</div>
			
					<div class="form-group">
						<label for="course-file">Fichier PDF</label>
						<input type="file" id="course-file" accept=".pdf" required>
					</div>
			
					<button type="submit" class="submit-course-btn">Envoyer le cours</button>
				</form>
			</div>
			
			
			<!-- Enter Grades  Section ---- -->
			<div id="enter-grades" class="enter-grades-section" style="display: none;">
				<h2 class="title">üìã Gestion des Notes</h2>
				

					<div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4">
						<!--
						<select id="niveau-select" class="border rounded p-2">
							<option value="">-- Niveau --</option>
							<option value="M1">Master 1</option>
							<option value="M2">Master 2</option>
						</select>
						-->
						<select id="classe-select" class="border rounded p-2" required>
							<option value="">-- Classe --</option> 
							<option value="M1 SI">M1 Systeme d'information</option>
							<option value="M2 SI">M2 Systeme d'information</option>
							<option value="M1 Droit">M1 Droit</option>
							<option value="M2 Droit">M2 Droit</option>
							<option value="M1 Mng">M1 Management</option>
							<option value="M2 Mng">M2 Management</option>
							<option value="M1 Act">M1 Actuariat</option>
							<option value="M2 Act">M2 Actuariat</option>
						</select>
						<select id="module-select" class="border rounded p-2" required>
							<option value="">-- Module --</option>

<!-- fetch data : la collection Module -->

						   <!--
							<option value="SIC">Systeme d'information complementaire</option>
							<option value="Archi"> Architecture des S.I des differentes branches de la PS</option>
							<option value="GOSIPS">gestion operationnelles des SI des branches de la PS</option>
							<option value="BI">Informatique Decisionnelle</option>
							<option value="Gouvernance">Les SI comme Outils de la gouvernance de la Ps</option>

							<option value="OPS">Les organisations de la PS</option>
							<option value="TMSAPS">Theories du management strategique Appliquees a la PS</option>
							<option value="MSRFPS">Managementstrategique des ressources financiers de la PS </option>
							<option value="MORPS">Management operationnel des risques Court et long terme de la PS</option>
							<option value="MR2">Methodologie de recherche (2)</option>
							<option value="GP">Gestion de projet</option>
							<option value="PCPC">La politique de communication pour la promotion de la culture de la PS</option>

							<option value="MA">Mathematique actuarielles</option>
							<option value="TR">Theorie des risques</option>
							<option value="MSA">Methodes statistiques appliquees en actuariat</option>
							<option value="OIC">Outils Informatiques de calcul pour les actuaires</option>
							<option value="EA">Evaluation actuarielle en assurance sante,assurance vie Et risques professionnels</option>
							<option value="MAPS">Modelisation actuarielle en matiere de prestation sociales </option>
							<option value="SCF">Comptabilite financiere - SCF</option>
						   -->
						</select>
					</div>

					<table class="w-full border rounded-lg overflow-hidden mt-4 text-sm text-center">
						<thead class="bg-gray-100">
						<tr>
							<th class="p-2" id="studentId">√âtudiant</th>
							<th class="p-2">Note CC</th>
							<th class="p-2">Note Examen</th>
							<th class="p-2">Moyenne</th>
						</tr>
						</thead>
						<tbody id="grades-body">
						<!-- Contenu g√©n√©r√© dynamiquement -->
						</tbody>
					</table>

					<button class="btn" onclick="enregistrerNotes()">üíæ Enregistrer</button>

			</div>




			<div id="notification" class="notification-section" style="display: none;">
				<h2 class="section-title"> üîî Notifications</h2>

				<div class="notifications-container">
					<!-- Exemple de notification -->
					<div class="notification-item unread">
						<h4 class="notification-title">üì¢ R√©union p√©dagogique</h4>
						<p class="notification-message">Une r√©union est pr√©vue le 15 avril √† 10h en amphi 2.</p>
						<span class="notification-date">13-04-2025</span>
					</div>
			
					<div class="notification-item">
						<h4 class="notification-title">üìò Nouvelle note disponible</h4>
						<p class="notification-message">Votre note de module "Syst√®mes d'information" est disponible.</p>
						<span class="notification-date">10-04-2025</span>
					</div>
				</div>

			</div>
			




			<div id="messages" class="messages-section" style="display: none;">
				<!-- Contenu de la section Notice -->
				<h2>  Canal de communication </h2>

				<!-- Formulaire d'envoi d'annonce -->
				<form id="noticeForm">
					<label>Titre de communication 
						<input type="text" id="noticeTitle" required />
					</label>

					<label>Message
						<textarea id="noticeMessage" rows="4" required></textarea>
					</label>

					<label>Destinataires
						<select id="noticeTarget" required>
							<option value="">-- S√©lectionner --</option>
							<option value="teachers">Adminitration</option>
							<option value="classe">Classe sp√©cifique</option>
						</select>
					</label>

					<!-- Champ cach√© qui s'affiche uniquement si "classe" est choisi -->
					<div id="classSelection" style="display: none;">
						<label>Classe :
							<select id="targetClass">
								<option value=""> Selectionner une classe</option>
								<option value="">üìö Selectionner une classe</option>
									<option value="Master1 SI">M1 Systeme d'information</option>
									<option value="Master2 SI">M2 Systeme d'information</option>
									<option value="Master1 droit">M1 Droit</option>
									<option value="Master2 droit">M2 Droit</option>
									<option value="Master1 Mng">M1 Management</option>
									<option value="Master2 Mng">M2 Management</option>
									<option value="Master1 Act">M1 Actuariat</option>
									<option value="Master2 Act">M2 Actuariat</option>
							</select>
						</label>
					</div>

					<button type="submit">üì¢ Envoyer le message </button>
				</form>

				<hr />

				<!-- Liste des annonces publi√©es -->
				<h3> Liste des Messages envoy√©es </h3>
				<div id="noticeList">
					<!-- Les annonces s‚Äôafficheront ici dynamiquement -->
				</div>
			</div>





			<!-- Fiche de voeux section-->
			<div id="fiche-voeux" class="fiche-voeux-section" style="display: none;">
				<div class="container-voeux">
				<h2> Fiche de V≈ìux - Modules √† enseigner </h2>
				  <form id="voeuxForm">
					<div class="card">
						<h3>Choix des modules (S1 / S2/ S3)</h3>
						 <p>Choisissez 5 √† 7 modules avec pr√©f√©rence d√©croissante (1 = plus pr√©f√©r√©)</p>
						<div id="modules-container">
							<!-- zone des choix -->
						</div>
						<button type="button" onclick="addModule()">Ajouter un module</button><br><br>
					</div>
					
					<div class="card">
						<h3>Pr√©f√©rences</h3>
						<label>Jours pr√©f√©r√©s : <input type="text" name="jours"></label><br>
						<label>Jours √† √©viter : <input type="text" name="jours_eviter"></label><br>
						<label>Pr√©f√©rence horaire :
						<select name="horaire">
							<option>Matin</option>
							<option>Apr√®s-midi</option>
							<option>Journ√©e compl√®te</option>
						</select>
						</label><br>
						<label>Accepte les heures suppl√©mentaires ?
						<select name="hs">
							<option value="oui">Oui</option>
							<option value="non">Non</option>
						</select>
						</label><br>
						<label>Raison (si non) :
						<input type="text" name="raison">
						</label><br><br>
					</div>
					<div class="card">
						<h3>Signature de l‚Äôenseignant</h3>
						<p>Veuillez signer dans la zone ci-dessous :</p>
						<canvas id="signature-pad" width="300" height="100" style="border:1px solid #ccc; background:#fff;"></canvas><br>
						<button type="button" onclick="clearSignature()">Effacer la signature</button>
					</div>
		
						<button type="submit">Soumettre la fiche de v≈ìux</button>
						<button type="button" onclick="generatePDF()">üì• T√©l√©charger en PDF</button>
						<button type="button" onclick="resetVoeux()">R√©initialiser la fiche</button>

					</form>
					    
					   <!--la zone √† exporter dans une div isol√©e-->
						<div id="voeux-pdf-content" style="background: white; padding: 20px; margin-top: 200px;">
							<div style="text-align: center;">
								<img src="/images/logo.jpg" alt="Logo ESSS" width="80">
								<h2 style="margin: 5px 0;">Fiche de V≈ìux Enseignant</h2>
								<p>Ann√©e universitaire 2024 / 2025</p>
							</div>

							<div id="voeuxFormPrintable">
								<!-- ici tu clones dynamiquement le contenu du formulaire avec valeurs -->
							</div>
							<div style="margin-top: 40px;">
								<p><strong>Sign√© le :</strong> <span id="pdf-signature-date"></span></p>
								<p><strong>Signature de l‚Äôenseignant :</strong> ___________________________</p>
							</div>
						</div>
						
				</div>
				
			</div>
				 
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->


	           
	
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script><!--Inclure la librairie html2pdf-->


	<script src="/js/esp-Ens.js"></script>
</body>
</html>